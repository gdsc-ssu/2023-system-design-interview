# 3장. 시스템 설계 면접 공략법

> 혹시 몰라서 사진은 제외하고 올리겠습니다. 

## 면접?

면접자의 기술적 능력 평가

더불어서, 협력에 적합한가, 압박이 심한 상황도 잘 헤쳐 나갈 수 있는가, 모호한 문제를 건설적으로 해결할 수 있는가, 좋은 질문을 던질 능력이 있는가

: ( 설계의 순수성 vs 타협적 결정 - 때로는 타협적 결정.

## 효과적인 면접을 위한 4단계 접근법

> 티키타카 - p.42~43
> 
### 1. **문제 이해 및 설계 범위 확정**
- 어떤 기능
- 제품 사용자 수
- 회사 성장 속도
- 주로 사용하는 기술 스택

용어 : DAU

### 2. **개략적인 설계안 제시 및 동의 구하기**
- 면접관을 마치 팀원인 것 처럼 생각하고, 설계 과정에 개입하기
- 핵심 컴포넌트를 포함하는 다이어그램 그리기
    - 클라이언트, API, 웹 서버, 데이터 저장소, 캐시, CDN, 메시지 큐
- 제약사항들을 만족하는지 확인

**EX ) 뉴스 피드 시스템 설계**

- 기능?
    - **피드 발행** : 사용자가 포스트를 올리면, 데이터가 ***캐시/데이터베이스에 기록***되고, 해당 사용자의 친구 뉴스 피드에 뜨게 된다.
    - **피드 생성** : 어떤 사용자의 뉴스 피드는 해당 사용자 친구들의 포스트를 ***시간 역순***으로 정렬하여 만든다.

![웹 브라우저, 모바일 앱](_03/Untitled.png)

웹 브라우저, 모바일 앱

- 전반적으로 달성해야 할 **목표와 기능 범위** 확인
- 전체 설계의 **개략적 청사진** 마련
- 해당 청사진에 대한 **면접관의 의견 청취**
- 상세 설계에서 **집중해야 할 영역들** 확인

### 3. **상세 설계**
- 설계 대상 컴포넌트 사이의 우선순위 정하기

→ 설계에서 중요한 것 그리고 내가 알고 있다고 어필할 수 있는 것을 **제한된 시간 내**에 다 보여주기


![설계에 맞게 더 구체화](_03/Untitled%202.png)

> 왜?
> 1. ‘인증/처리율 제한’ 기능을 하는 웹 서버를 각 서비스 앞단으로 따로 빼서 설계했을까?
> 2. ‘포스팅 전송 서비스’에서 ‘친구 id 목록 추천’을 위해 그래프 데이터베이스를 쓴 이유는?
> 3.  ‘포스팅 전송 서비스’에서 친구 데이터를 ‘사용자 정보 캐시’에 저장한 이유는?
> 4. 포스트 전송 서비스에 메시지 큐를 사용한 이유는?
> 
- 나름 생각해본 답변   
    - 인증 분리 이유 :  공통적인 작업. 모든 서비스 앞단에서 인증하고, 받은 토큰만 가지고 각 서비스에서 작업.
    - 처리율 제한 기능을 앞단에 둔 이유 : 당연. 그렇지만, 서비스 별로 요청 횟수가 확연히 차이가 나는 경우는 어떻게 해야 하는가?
    - 그래프 데이터베이스 ?
        
        시멘틱 쿼리를 위해 그래프 구조를 사용하여 데이터를 그래프(노드, 엣지, 프로퍼티)로 저장하고 표현하는 데이터베이스 
        
        - 시멘틱 쿼리 : 연관 및 컨텍스트 특성 의 쿼리 및 분석을 허용
    - 사용자 정보 캐시
        - 포스팅 전송에 친구 데이터 사용 (ex-인스타 발행?)
    - 메시지 큐에 보관된 메시지는 소비자가 꺼낼때까지 안전히 보관된다는 특성
        - ~~http 통신에 의존→ 중간에 사라진다면..?~~
        == 안전 전달이 보장된다.
        - 비동기적 전송
            - 포스팅 용량…→ 사후 처리도 괜찮음
        
### 4. **마무리**

추가 질문…

- 시스템 병목 구간, 혹은 더 개선 가능한 지점을 찾아내라 주문
- 설계를 한번 다시 요약 (긴 세션이 끝난 뒤에 면접관의 기억을 환기시켜주는 효과)
- 오류가 발생하면 어떤 일이 생기는지, 이에 대한 해결 방안
- 운영 이슈 : 메트릭 수집, 모니터링, 로그, 어떻게 시스템 배포해나갈 것인가
- 규모 확장 요구 → 어떻게 대처?
